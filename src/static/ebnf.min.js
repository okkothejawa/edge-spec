hljs.registerLanguage(
  "ebnf",
  (hljs) => {
    const commentMode = hljs.COMMENT(/\(\*/, /\*\)/);

    const variableMode = {
        className: "variable",
        begin: /<[^<>]*>/,
    }

    const nonTerminalMode = {
      className: "attribute",
      begin: /^[ ]*[a-zA-Z]+([\s_-]+[a-zA-Z]+)*/,
    };

    const specialSequenceMode = {
      className: "meta",
      begin: /\?.*\?/,
    };

    const ruleBodyMode = {
      begin: /=/,
      end: /[.;]/,
      contains: [
        commentMode,
        specialSequenceMode,
        variableMode,
        {
          // terminals
          className: "string",
          variants: [
            hljs.APOS_STRING_MODE,
            hljs.QUOTE_STRING_MODE,
            {
              begin: "`",
              end: "`",
            },
          ],
        },
      ],
    };

    return {
      name: "Extended Backus-Naur Form",
      illegal: /\S/,
      contains: [commentMode, nonTerminalMode, variableMode, ruleBodyMode],
    };
  }
);
hljs.initHighlightingOnLoad();